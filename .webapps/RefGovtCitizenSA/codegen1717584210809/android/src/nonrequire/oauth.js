var OAuth;if(null==OAuth)OAuth={};OAuth.setProperties=function setProperties(a,b){if(null!=a&&null!=b){for(var c in b){a[c]=b[c]}}return a};OAuth.setProperties(OAuth,{percentEncode:function percentEncode(a){if(null==a){return""}if(a instanceof Array){for(var b="",c=0;c<a.length;++a){if(""!=b)b+="&";b+=OAuth.percentEncode(a[c])}return b}a=encodeURIComponent(a);a=a.replace(/\!/g,"%21");a=a.replace(/\*/g,"%2A");a=a.replace(/\'/g,"%27");a=a.replace(/\(/g,"%28");a=a.replace(/\)/g,"%29");return a},decodePercent:function decodePercent(a){if(null!=a){a=a.replace(/\+/g," ")}return decodeURIComponent(a)},getParameterList:function getParameterList(a){if(null==a){return[]}if("object"!=typeof a){return OAuth.decodeForm(a+"")}if(a instanceof Array){return a}var b=[];for(var c in a){b.push([c,a[c]])}return b},getParameterMap:function getParameterMap(a){if(null==a){return{}}if("object"!=typeof a){return OAuth.getParameterMap(OAuth.decodeForm(a+""))}if(a instanceof Array){for(var b={},c=0,d;c<a.length;++c){d=a[c][0];if(b[d]===void 0){b[d]=a[c][1]}}return b}return a},getParameter:function getParameter(a,b){if(a instanceof Array){for(var c=0;c<a.length;++c){if(a[c][0]==b){return a[c][1]}}}else{return OAuth.getParameterMap(a)[b]}return null},formEncode:function formEncode(a){for(var b="",c=OAuth.getParameterList(a),d=0,e;d<c.length;++d){e=c[d][1];if(null==e)e="";if(""!=b)b+="&";b+=OAuth.percentEncode(c[d][0])+"="+OAuth.percentEncode(e)}return b},decodeForm:function decodeForm(a){for(var b=[],c=a.split("&"),d=0,e;d<c.length;++d){e=c[d];if(""==e){continue}var f=e.indexOf("="),g,h;if(0>f){g=OAuth.decodePercent(e);h=null}else{g=OAuth.decodePercent(e.substring(0,f));h=OAuth.decodePercent(e.substring(f+1))}b.push([g,h])}return b},setParameter:function setParameter(a,b,c){var d=a.parameters;if(d instanceof Array){for(var e=0;e<d.length;++e){if(d[e][0]==b){if(c===void 0){d.splice(e,1)}else{d[e][1]=c;c=void 0}}}if(c!==void 0){d.push([b,c])}}else{d=OAuth.getParameterMap(d);d[b]=c;a.parameters=d}},setParameters:function setParameters(a,b){for(var c=OAuth.getParameterList(b),d=0;d<c.length;++d){OAuth.setParameter(a,c[d][0],c[d][1])}},completeRequest:function completeRequest(a,b){if(null==a.method){a.method="GET"}var c=OAuth.getParameterMap(a.parameters);if(null==c.oauth_consumer_key){OAuth.setParameter(a,"oauth_consumer_key",b.consumerKey||"")}if(null==c.oauth_token&&null!=b.token){OAuth.setParameter(a,"oauth_token",b.token)}if(null==c.oauth_version){OAuth.setParameter(a,"oauth_version","1.0")}if(null==c.oauth_timestamp){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp())}if(null==c.oauth_nonce){OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6))}OAuth.SignatureMethod.sign(a,b)},setTimestampAndNonce:function setTimestampAndNonce(a){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp());OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6))},addToURL:function addToURL(a,b){newURL=a;if(null!=b){var c=OAuth.formEncode(b);if(0<c.length){var d=a.indexOf("?");if(0>d)newURL+="?";else newURL+="&";newURL+=c}}return newURL},getAuthorizationHeader:function getAuthorizationHeader(a,b){for(var c="OAuth realm=\""+OAuth.percentEncode(a)+"\"",d=OAuth.getParameterList(b),e=0;e<d.length;++e){var f=d[e],g=f[0];if(0==g.indexOf("oauth_")){c+=","+OAuth.percentEncode(g)+"=\""+OAuth.percentEncode(f[1])+"\""}}return c},correctTimestampFromSrc:function correctTimestampFromSrc(a){a=a||"oauth_timestamp";var b=document.getElementsByTagName("script");if(null==b||!b.length)return;var c=b[b.length-1].src;if(!c)return;var d=c.indexOf("?");if(0>d)return;parameters=OAuth.getParameterMap(OAuth.decodeForm(c.substring(d+1)));var e=parameters[a];if(null==e)return;OAuth.correctTimestamp(e)},correctTimestamp:function correctTimestamp(a){OAuth.timeCorrectionMsec=1e3*a-new Date().getTime()},timeCorrectionMsec:0,timestamp:function timestamp(){var a=new Date().getTime()+OAuth.timeCorrectionMsec;return Math.floor(a/1e3)},nonce:function nonce(a){for(var b=OAuth.nonce.CHARS,c="",d=0,e;d<a;++d){e=Math.floor(Math.random()*b.length);c+=b.substring(e,e+1)}return c}});OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";OAuth.declareClass=function declareClass(a,b,c){var d=a[b];a[b]=c;if(null!=c&&null!=d){for(var e in d){if("prototype"!=e){c[e]=d[e]}}}return c};OAuth.declareClass(OAuth,"SignatureMethod",function OAuthSignatureMethod(){});OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function sign(a){var b=OAuth.SignatureMethod.getBaseString(a),c=this.getSignature(b);OAuth.setParameter(a,"oauth_signature",c);return c},initialize:function initialize(a,b){var c;if(null!=b.accessorSecret&&9<a.length&&"-Accessor"==a.substring(a.length-9)){c=b.accessorSecret}else{c=b.consumerSecret}this.key=OAuth.percentEncode(c)+"&"+OAuth.percentEncode(b.tokenSecret)}});OAuth.setProperties(OAuth.SignatureMethod,{sign:function sign(a,b){var c=OAuth.getParameterMap(a.parameters).oauth_signature_method;if(null==c||""==c){c="HMAC-SHA1";OAuth.setParameter(a,"oauth_signature_method",c)}OAuth.SignatureMethod.newMethod(c,b).sign(a)},newMethod:function newMethod(a,b){var c=OAuth.SignatureMethod.REGISTERED[a];if(null!=c){var d=new c;d.initialize(a,b);return d}var e=new Error("signature_method_rejected"),f="";for(var g in OAuth.SignatureMethod.REGISTERED){if(""!=f)f+="&";f+=OAuth.percentEncode(g)}e.oauth_acceptable_signature_methods=f;throw e},REGISTERED:{},registerMethodClass:function registerMethodClass(a,b){for(var c=0;c<a.length;++c){OAuth.SignatureMethod.REGISTERED[a[c]]=b}},makeSubclass:function makeSubclass(a){var b=OAuth.SignatureMethod,c=function(){b.call(this)};c.prototype=new b;c.prototype.getSignature=a;c.prototype.constructor=c;return c},getBaseString:function getBaseString(b){var c=b.action,d=c.indexOf("?"),e;if(0>d){e=b.parameters}else{e=OAuth.decodeForm(c.substring(d+1));for(var f=OAuth.getParameterList(b.parameters),g=0;g<f.length;++g){e.push(f[g])}}return OAuth.percentEncode(b.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(c))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(e))},normalizeUrl:function normalizeUrl(a){var b=OAuth.SignatureMethod.parseUri(a),c=b.protocol.toLowerCase(),d=b.authority.toLowerCase(),e="http"==c&&80==b.port||"https"==c&&443==b.port;if(e){var f=d.lastIndexOf(":");if(0<=f){d=d.substring(0,f)}}var g=b.path;if(!g){g="/"}return c+"://"+d+g},parseUri:function parseUri(a){var b={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=b.parser.strict.exec(a),d={},e=14;while(e--){d[b.key[e]]=c[e]||""}return d},normalizeParameters:function normalizeParameters(a){if(null==a){return""}for(var b=OAuth.getParameterList(a),c=[],d=0,e;d<b.length;++d){e=b[d];if("oauth_signature"!=e[0]){c.push([OAuth.percentEncode(e[0])+" "+OAuth.percentEncode(e[1]),e])}}c.sort(function(c,a){if(c[0]<a[0])return-1;if(c[0]>a[0])return 1;return 0});for(var f=[],g=0;g<c.length;++g){f.push(c[g][1])}return OAuth.formEncode(f)}});OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(){return this.key}));OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(a){b64pad="=";var b=b64_hmac_sha1(this.key,a);return b}));try{OAuth.correctTimestampFromSrc()}catch(a){}